#pragma once
#include "../Engine/GameObject.h"
#include <vector>

//前定義
class Block;

//■■シーンを管理するクラス
class TutorialStage : public GameObject
{
	//ステージ種類の数
	enum StageCategory
	{
		first,
		Two,
		MAX
	};

	//背景モデル
	int spaceModel_;

	//背景モデルのトランスフォーム
	Transform tSpace_;

	//ステージ作る時の名前
	std::string StageFileNmae_[MAX];

	//ステージごとの画角
	int fieldAngle_[MAX];

	//ステージごとのライトの強さ
	int lightIntensity_[MAX];

	//モデル番号
	int hModel_[MAX];

	//球体に物体を乗せるために疑似モデル
	int CirclePolyModel_;

	//ステージごとのPlayerの初期位置
	XMFLOAT3 pos_[MAX];

	//現在どこのステージを表示してるかのステータス
	int status_;

	//3Dのモデルを使用しているかどうか
	bool threeDflag_[MAX];

	//ブロックを保存しておくVector(後にブロックとの当たり判定を行うために使う)
	std::vector<Block*> tBlock_;

public:

	//コンストラクタ
	//引数：parent  親オブジェクト（SceneManager）
	TutorialStage(GameObject* parent);

	//初期化
	void Initialize() override;

	//更新
	void Update() override;

	//描画
	void Draw() override;

	//開放
	void Release() override;

	//更新の前に一回呼ばれる関数
	void StartUpdate() override;

	//そこにブロックがあるかどうか,もしあったら重なっている分ずらす
	//引数:status 0:右 1:左 2:上 3:下 
	bool IsBlock(XMFLOAT3 *pos, int status);

	//そこにブロックがあるかどうか,もしあったら重なっている分ずらす
	//引数:status 0:右 1:左 2:前 3:後 4:下 5:上 
	bool IsBlock3D(XMFLOAT3* pos, XMVECTOR move, XMMATRIX mat, int status);

	//モデル番号のゲット関数
	int GethModel() { return hModel_[status_]; }

	//球体に物体を乗せるために疑似モデル番号のゲット関数
	int GetPolyModell() { return CirclePolyModel_; }

	//Posのゲット関数
	XMFLOAT3 GetPos() { return pos_[status_]; }

	//3Dの動きをさせたいか
	bool GetthreeDflag() { return threeDflag_[status_]; }

	//ステージの切り替え
	void StatusPlus() { status_++; }

};

